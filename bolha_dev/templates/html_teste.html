<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/output.css') }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Odor+Mean+Chey&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.4/dist/Chart.min.js"> </script>
</head>

<body">
  <div class="items-center justify-center pl-2 border h-12">
      <img src="{{ url_for('static', filename='images/logo_bolha_dev.svg')}}" width=13% height=13% class="p-2"/>
    </div>
    <section class="flex h-screen bg-zinc-200">
      <aside class="bg-white p-6">
        <nav class="mt-5 space-y-3 min-w-32">
          <a href="#" class="bg-white/10 group rounded flex items-center gap-4 overflow-hidden hover:bg-zinc-400 transition-colors">
            <img src="{{ url_for('static', filename='images/bar_chart.png')}}" width=20% width=20% />
            Home</a>
            <a href="#" class="bg-white/10 group rounded flex items-center gap-4 overflow-hidden hover:bg-zinc-400 transition-colors">
            <img src="{{ url_for('static', filename='images/search_more.png')}}" width=20% width=20% />
            Search Jobs</a>
        </nav>
      </aside>
      <main class="flex-1 m-1">
        <div class="grid grid-cols-3 gap-2 mr-2 ml-2">
        
        <div class="drop-shadow-lg bg-white rounded-2xl">
          <canvas id="horizontalBar"></canvas>
        </div>

        <div class="drop-shadow-lg bg-white flex items-center rounded-2xl">
          <canvas id="doughnutGraph"  ></canvas>
        </div>

        <div class="drop-shadow-lg bg-white flex items-center rounded-2xl">
          <canvas id="modalidade" ></canvas>
        </div>

          <script>
            var ctx = document.getElementById("horizontalBar").getContext("2d");
            var horizontalBar = new Chart(ctx, {
              type:"horizontalBar",
              data:{
                labels: {{ labels | safe }},
                datasets: [
                  {
                    axis: 'y',
                    label: "Top 10 posições",
                    data: {{ values | safe }}, 
                    fill: false,
                    backgroundColor: [
                      "rgba(39, 0, 230, 0.8)", 
                      "rgba(39, 30, 230, 0.8)", 
                      "rgba(39, 60, 230, 0.8)",
                      "rgba(39, 90, 230, 0.8)",
                      "rgba(39, 120, 230, 0.8)",
                      "rgba(39, 150, 230, 0.8)",
                      "rgba(39, 180, 230, 0.8)",
                      "rgba(39, 210, 230, 0.8)",
                      "rgba(39, 240, 230, 0.8)",
                      "rgba(39, 270, 230, 0.8)",
                    ],
                  }
                ]
              },
              options:{
                responsive: true,
                aspectRatio: 1,
                maintainAspectRatio: false
              }
            }
            )

            var ctx = document.getElementById("doughnutGraph").getContext("2d");
            var doughnutGraph = new Chart(ctx, {
              type:"doughnut",
              
              data:{
                labels: {{ labels1 | safe }},
                datasets: [
                  {
                    data: {{ values1 | safe }}, 
                    fill: false,
                    backgroundColor: [
                      "rgba(234, 24, 24, 0.8)",
                      "rgba(24, 234, 181, 0.8)", 
                      "rgba(151, 24, 234, 0.8)",
                      "rgba(39, 200, 230, 0.8)",
                    ],
                  }
                ]
              },
              options:{
                responsive: true,
                aspectRatio: 1,
                maintainAspectRatio: false,
                plugins: {
                    title: {
                        display: true,
                        text: 'Nivel'
                    }
                }
              }
            }
            )

            var ctx2 = document.getElementById("modalidade").getContext("2d");
            var modalidade = new Chart(ctx2, {
              type:"bar",
              data:{
                labels: {{ labels_modalidade | safe }},
                datasets: [
                  {
                    label: "Modalidade",
                    data: {{ values_modalidade | safe }}, 
                    fill: false,
                    backgroundColor: [
                      "rgba(14, 24, 240, 0.8)",
                      "rgba(14, 141, 240, 0.8)",
                      "rgba(14, 207, 240, 0.8)",
                      "rgba(14, 240, 226, 0.8)",
                    ],
                  }
                ]
              },
              options:{
                responsive: true,
                aspectRatio: 1,
                maintainAspectRatio: false,
              }
            }
            )
          </script>        
        </div>
        <div class="mt-2 mr-2 ml-2 drop-shadow-lg bg-white rounded-2xl relative">
          <canvas id="historico"></canvas>
          <script>
          
          // <block:setup:1>

          const labels = {{ labels_historico | safe }};
          const data = {
            labels: labels,
            datasets: [
              {
                label: "presencial",
                data:  {{ modalidade_total_presencial | safe }}, 
                backgroundColor: "rgba(14, 24, 240, 0.8)"
              },
              {
                label: "hibrido",
                data:  {{ modalidade_total_hibrido | safe }}, 
                backgroundColor: "rgba(14, 141, 240, 0.8)"
              },
              {
                label: "remoto",
                data:  {{ modalidade_total_remoto | safe }}, 
                backgroundColor: "rgba(14, 207, 240, 0.8)"
              }
            ]
          };
          // </block:setup>

          // <block:config:0>
          const config = {
            type: 'bar',
            data: data,
            options: {
              plugins: {
                title: {
                display: true,
                text: 'Historico'
              }
              },
              responsive: true,
              aspectRatio: 1.05,
              maintainAspectRatio: false,
              scales: {
                xAxes: [{
                    barPercentage: 1,
                    stacked: true
                }],
                yAxes: [{
                    stacked: true
                }]
              }
            }
          };
          // </block:config>
          var ctx3 = document.getElementById("historico").getContext("2d");
          var historico = new Chart(ctx3, config)
          </script>
        </div>
      </main>
    </section>
    <footer class="h-8 border p-4 flex items-center font-odor" >The numbers never lie</footer>
</body>

</html>
